<!DOCTYPE html>
<html>
    <head>
        <title>Class 4 | Advanced GIS</title>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

        <link href='http://fonts.googleapis.com/css?family=Ledger' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>

        <link href="css/pig.css" rel="stylesheet" type="text/css" />
        <link href="css/base.css" rel="stylesheet" />

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
        <script src="http://benpickles.github.io/onScreen/jquery.onscreen.min.js"></script>
        <script src="js/pig.js"></script>

        <script>
            $(document).ready(function() {
                $(document).on('scroll', function () {
                    var hue = Math.random() * 360,
                        saturation = Math.random() * 100,
                        lightness = Math.random() * 100,
                        color = 'hsl(' + hue + ',' + saturation + '%,' + lightness + '%)';
                    $('.slide:onScreen')
                        .css('background-color', color)
                        .toggleClass('dark-background', lightness < 50);
                });
            });
        </script>
    </head>
    <body>

        <div class="slide lonely">
            <h1>Advanced GIS</h1>
            <p>Class 4</p>
        </div>

        <div class="slide lonely">
            <h2>upcoming: 3/5 final project proposals <strong>due</strong></h2>
        </div>

        <div class="slide lonely">
            <h2>final project proposals</h2>
            <p>2 pages</p>
        </div>

        <div class="slide lonely">
            <h2>final project proposals</h2>
            <p>work plan:</p>
            <p>data (where's it coming from? what will you have to do to it?)</p>
        </div>

        <div class="slide lonely">
            <h2>final project proposals</h2>
            <p>work plan:</p>
            <p>what will it look like? include a sketch.</p>
        </div>

        <div class="slide lonely">
            <h2>final project proposals</h2>
            <p>work plan:</p>
            <p>what do you need to learn to make this happen?</p>
        </div>

        <div class="slide lonely">
            <h2>final project proposals</h2>
            <p>this will likely change as you do your project, and that's okay</p>
        </div>

        <div class="slide lonely">
            <h2>final project proposals</h2>
            <p>define a <strong>milestone</strong> for yourself. it will be due <strong>4/9.</strong></p>
        </div>

        <div class="slide lonely">
            <h2>upcoming: 3/13 guest speaker</h2>
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h2>CartoCSS</h2>
        </div>

        <div class="slide lonely">
            <iframe src="http://pamelarae.cartodb.com/viz/1913417a-927d-11e3-bb77-0e49973114de/embed_map?title=true&description=true&search=true&shareable=false&cartodb_logo=true&layer_selector=true&legends=true&scrollwheel=true&sublayer_options=1|1|1|1&sql=&sw_lat=30.096944685363237&sw_lon=32.34580993652344&ne_lat=31.991115892716078&ne_lon=37.61924743652344" width="100%" height="100%"></iframe>
        </div>

        <div class="slide lonely">
            <iframe src="http://alissarose.cartodb.com/viz/bb04fb62-944a-11e3-9b4e-0e625a1c94a6/embed_map?title=true&description=true&search=false&shareable=true&cartodb_logo=true&layer_selector=false&legends=false&scrollwheel=true&sublayer_options=1&sql=&sw_lat=19.25216359015986&sw_lon=-81.40388488769531&ne_lat=19.410906787494774&ne_lon=-81.07429504394531" width="100%" height="100%"></iframe>
        </div>

        <div class="slide lonely">
            <iframe src="http://alisonjoymiller.cartodb.com/viz/8d173c90-902d-11e3-a6f5-0edd25b1ac90/embed_map?title=true&description=true&search=false&shareable=true&cartodb_logo=true&layer_selector=false&legends=true&scrollwheel=true&sublayer_options=1&sql=&sw_lat=40.59191767081281&sw_lon=-74.19393539428711&ne_lat=40.846921842579206&ne_lon=-73.53475570678711" width="100%" height="100%"></iframe>
        </div>

        <div class="slide lonely">
            <pre>#earthquakes {
    marker-fill: #ff307a;
    marker-line-color: #FFF;
    marker-line-width: 0.25;
    marker-line-opacity: 0.4;
    marker-width: 2;
    marker-allow-overlap: true;
}</pre>
        </div>

        <div class="slide lonely">
            <pre>
#earthquakes {
    marker-width: 3;
    ...
    [mag >= 6.5] {
        marker-width: 8;
    }
}</pre>
        </div>

        <div class="slide lonely">
            <pre>
#earthquakes {
    marker-width: 3;
    ...
    [zoom &gt;= 10][zoom < 16] {
        marker-width: 8;
    }
}</pre>
        </div>

        <div class="slide lonely">
            <pre style="font-size: 50px; line-height: 70px;">
#earthquakes {
    marker-width: 3;
    ...
    [mag &gt; 5.5],
    [place = 'Northern Mid-Atlantic Ridge'] {
        marker-width: 8;
    }
}</pre>
        </div>

        <div class="slide lonely">
            <pre style="font-size: 40px; line-height: 50px;">@width: 8;
#earthquakes {
    marker-width: @width;
    marker-fill: #ff307a;
    marker-allow-overlap: true;
    
    [zoom >= 4] {
        marker-width: @width * 2;
    }
    [zoom >= 8] {
        marker-width: @width * 3;
    }
    [zoom >= 12] {
        marker-width: @width * 4;
    }
}</pre>
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h1>Advanced GIS</h1>
            <p>Class 4</p>
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h2>CartoDB follow up</h2>
        </div>

        <div class="slide lonely">
            <h2>adding features</h2>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/cartodb-add-feature.gif" />
        </div>

        <div class="slide lonely">
            <h2>adding columns</h2>
        </div>

        <div class="slide lonely">
            <h2>useful if you want to add data to your features</h2>
        </div>

        <div class="slide lonely">
            <h2>or, say, you have one thing in the table but want to display another</h2>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/cartodb-add-column.gif" />
        </div>

        <div class="slide lonely">
            <h2>advanced legend and infowindow stuff</h2>
        </div>

        <div class="slide lonely">
            <h2>advanced legend and infowindow stuff</h2>
            <p>you need HTML and CSS. we'll get there.</p>
        </div>

        <div class="slide lonely">
            <h2>other things</h2>
            <p>I recommend checking CartoDB's tutorials:</p>
            <p><a href="http://developers.cartodb.com/tutorials.html">developers.cartodb.com/tutorials.html</a></p>
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <img src="img/cartodb-filters.png" />
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-filters-specific.gif" />
        </div>

        <div class="slide lonely">
            <h2>but I wanted <strong>6.5</strong>!</h2>
        </div>

        <div class="slide lonely">
            <h2>SQL</h2>
        </div>

        <div class="slide lonely">
            <h2>SQL</h2>
            <h2>Structured Query Language</h2>
        </div>

        <div class="slide lonely">
            <h2>SQL</h2>
            <h2>the language databases understand</h2>
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-table.png" />
        </div>

        <div class="slide lonely">
            <img style="float: left; max-width: 50%;" src="img/paper.jpg" />
        </div>

        <div class="slide lonely">
            <img style="float: left; max-width: 50%;" src="img/paper.jpg" />
            <div style="float: left; width: 50%;">
                <div style="margin-left: 25px;">
                    <p>Give me the pages that refer to properties in Brooklyn.</p>
                </div>
            </div>
        </div>

        <div class="slide lonely">
            <img style="float: left; max-width: 50%;" src="img/paper.jpg" />
            <div style="float: left; width: 50%;">
                <div style="margin-left: 25px;">
                    <p>Give me the addresses of the properties in Brooklyn.</p>
                </div>
            </div>
        </div>

        <div class="slide lonely">
            <h2>databases are great at these types of questions</h2>
        </div>

        <div class="slide lonely">
            <h2>it's what they were made for</h2>
        </div>

        <div class="slide lonely">
            <h2>SQL helps you ask these questions in a way databases understand</h2>
        </div>

        <div class="slide lonely">
            <h2>Carto<strong>DB</strong></h2>
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-table.png" />
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-table-query.png" />
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-table-select.png" />
        </div>

        <div class="slide lonely">
            <h2><span class="code">SELECT</span>: choose columns from a table</h2>
        </div>

        <div class="slide lonely">
            <p>just list the columns. for example:</p>
            <pre>SELECT mag, place
FROM earthquakes</pre>
        </div>

        <div class="slide lonely">
            <h2><span class="code">SELECT *</span>: choose <strong>all</strong> columns</h2>
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-table-where.png" />
        </div>

        <div class="slide lonely">
            <h2><span class="code">WHERE</span>: choose rows from a table</h2>
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-table-select-and-where.png" />
        </div>

        <div class="slide lonely">
            <p>for example:</p>
            <pre>SELECT *
FROM earthquakes
WHERE mag &gt; 6 
  AND mag &lt; 7</pre>
        </div>

        <div class="slide lonely">
            <h2>try it yourself</h2>
            <p>get just the earthquakes with <span class="code">mag</span> between 7 and 7.5</p>
        </div>

        <div class="slide lonely">
            <p>these conditions are the same as the ones in CartoCSS:</p>
            <pre style="margin-left: 250px;">&gt;
&lt;
=
!=
&gt;=
&lt;=</pre>
        </div>

        <div class="slide lonely">
            <h2>and you combine them with <span class="code">AND</span> / <span class="code">OR</span></h2>
        </div>

        <div class="slide lonely">
            <p>for example:</p>
            <pre>SELECT *
FROM earthquakes
WHERE mag &gt; 6 
  AND place =
  'Northern Mid-Atlantic Ridge'</pre>
        </div>

        <div class="slide lonely">
            <p>for example:</p>
            <pre>SELECT *
FROM earthquakes
WHERE mag &gt; 6 
  OR place =
  'Northern Mid-Atlantic Ridge'</pre>
        </div>

        <div class="slide lonely">
            <h2>or you can negate a condition with <span class="code">NOT</span></h2>
        </div>

        <div class="slide lonely">
            <p>for example:</p>
            <pre>SELECT *
FROM earthquakes
WHERE NOT (mag &gt; 6 
  OR place =
  'Northern Mid-Atlantic Ridge')</pre>
        </div>

        <div class="slide lonely">
            <p>for example:</p>
            <pre>SELECT *
FROM earthquakes
WHERE NOT (mag &gt; 6 
  OR place =
  'Northern Mid-Atlantic Ridge')</pre>
            <p>(match any rows that <strong>do not</strong> match the condition)</p>
        </div>

        <div class="slide lonely">
            <h2>try it yourself</h2>
            <p>get just the earthquakes with <span class="code">mag</span> not between 7 and 7.5</p>
        </div>

        <div class="slide lonely">
            <h2><span class="code">SELECT</span> does not change the table, it only changes your view of the table</h2>
        </div>

        <div class="slide lonely">
            <h2>you can also use <span class="code">SELECT</span> to get a better idea of what data is in your table</h2>
        </div>

        <div class="slide lonely">
            <p>get a count of matching rows:</p>
            <pre>SELECT COUNT(*)
FROM earthquakes
WHERE mag &gt; 6 
  OR place =
  'Northern Mid-Atlantic Ridge'</pre>
        </div>

        <div class="slide lonely">
            <h2>but you'll almost never want to use this statement for your map</h2>
        </div>

        <div class="slide lonely">
            <img src="img/cartodb-filters-nogeom.gif" />
        </div>

        <div class="slide lonely">
            <h2>try it yourself</h2>
            <p>get the number of earthquakes with <span class="code">mag</span> between 7 and 7.5</p>
        </div>

        <div class="slide lonely">
            <h2>you can also use SQL to quickly <span class="code">UPDATE</span> or <span class="code">DELETE</span> the data in your table</h2>
        </div>

        <div class="slide lonely">
            <h2>these <strong>will</strong> destroy data, so have a backup or test it with a table you don't need</h2>
        </div>

        <div class="slide lonely">
            <pre>UPDATE earthquakes
SET mag_display = 'HUGE'
WHERE mag &gt; 8</pre>
        </div>

        <div class="slide lonely">
            <pre>DELETE FROM earthquakes
WHERE ...</pre>
        </div>

        <div class="slide lonely">
            <p>more in the SQL cheatsheet in Lore</p>
        </div>

        <div class="slide lonely">
            <h2>SQL shows up everywhere online</h2>
        </div>

        <div class="slide lonely">
            <img src="img/web-sql-596.png" />
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-sql.png" />
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h2>getting data from CartoDB using SQL</h2>
        </div>

        <div class="slide lonely">
            <pre>http://eric.cartodb.com/api/v2/
    sql?q=SELECT COUNT(*) 
          FROM earthquakes 
          WHERE mag &gt; 7</pre>
            <a href="http://eric.cartodb.com/api/v2/sql?q=select%20COUNT(*)%20from%20earthquakes%20WHERE%20mag%20%3E%207">view results</a>
        </div>

        <div class="slide lonely">
            <h2>this should all go on one line, but then we have to make it small:</h2>
            <pre style="font-size: 24px;">http://eric.cartodb.com/api/v2/sql?q=SELECT COUNT(*) FROM earthquakes WHERE mag &gt; 7</pre>
        </div>

        <div class="slide lonely">
            <pre>http://eric.cartodb.com/api/v2/
    sql?q=SELECT * 
          FROM earthquakes 
          WHERE mag &gt; 7</pre>
            <a href="http://eric.cartodb.com/api/v2/sql?q=select%20*%20from%20earthquakes%20WHERE%20mag%20%3E%207">view results</a>
        </div>

        <div class="slide lonely">
            <h2>with public tables you can do this:</h2>
            <pre>http://{your username}.cartodb.com
    /api/v2/sql?q={your query}</pre>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-sql.png" />
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-sql-cartodb.png" />
        </div>

        <div class="slide lonely">
            <h2>write your query in a text editor, then turn it into the URL</h2>
        </div>

        <!--

        SQL, Structured Query Language, is a standard language used by databases
        for pulling data from databases.

        A database is a collection of things that may or may not be related to each
        other. A table describes a particular type of things within a database.
        When you interact with a database, you need to specify a table in order to
        get what you want.

        Tables are a lot like spreadsheets. They have columns that have names and
        types (eg, string, number, geometry). When you ask for data from a table,
        you can get as little or as many of these columns as you want at once. You
        generally will only want to get the columns you actually need since this
        will be faster. Think of this as showing or hiding columns in a
        spreadsheet - this makes it easier for you to look through the spreadsheet
        for what you're looking for.

        -->


        <!-- SQL for spatial databases -->

        <!--

        (Add a spatial attribute to the example we've been using.)

        Geometries are often way more interesting than numbers and strings, and you
        can do so much more with them.

        (An example.)

        -->

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h2>let's talk about this GeoJSON thing</h2>
        </div>

        <div class="slide lonely">
            <h2>we all know and love shapefiles, but...</h2>
        </div>

        <div class="slide lonely">
            <h2>shapefiles are difficult to read</h2>
        </div>

        <div class="slide lonely">
            <h2>(without proper software) shapefiles are difficult to read</h2>
        </div>

        <div class="slide lonely">
            <img src="img/geojson-shp-binary.png" />
        </div>

        <div class="slide lonely">
            <h2>(without proper software) shapefiles are difficult / impossible to write, too</h2>
        </div>

        <div class="slide lonely">
            <p>how to write a shapefile:</p>
            <img src="img/geojson-shp.png" />
        </div>

        <div class="slide lonely">
            <h2>and the people writing that software are in for some fun</h2>
        </div>

        <div class="slide lonely">
            <img src="img/shapefile-oddities.png" />
            <a class="source" href="http://gis.stackexchange.com/questions/18969/oddities-in-the-shapefile-technical-specification">gis.stackexchange.com</a>
        </div>

        <div class="slide lonely">
            <img src="img/shapefile-oddities-lunatic.png" />
        </div>

        <div class="slide lonely">
            <h2>"It's like they had a bunch of smart developers with one lunatic thrown in."</h2>
        </div>

        <div class="slide lonely">
            <h2>okay, maybe you have the software already. there are some other problems:</h2>
        </div>

        <div class="slide lonely">
            <h2>1. column names limited to ten characters</h2>
        </div>

        <div class="slide lonely">
            <img src="img/shapefile-column-names.png" />
        </div>

        <div class="slide lonely">
            <img src="img/shapefile-column-names.png" />
            <h2>how do you pronounce "C_DIG2DESC"?</h2>
        </div>

        <div class="slide lonely">
            <h2>2. multiple files make up a shapefile</h2>
        </div>

        <div class="slide lonely">
            <img src="img/shapefile-files.png" />
        </div>

        <div class="slide lonely">
            <h2>3. one geometry type per shapefile</h2>
        </div>

        <div class="slide lonely">
            <img src="img/shapefile-one-geometry-per-file.png" />
        </div>

        <div class="slide lonely">
            <h2>okay, back to GeoJSON</h2>
        </div>

        <div class="slide lonely">
            <h2>where do file formats come from?</h2>
        </div>

        <div class="slide lonely">
            <img src="img/geojson-mailinglist.png" />
        </div>

        <div class="slide lonely">
            <img src="img/geojson-cc.png" />
        </div>

        <div class="slide lonely">
            <h2>where does GeoJSON work?</h2>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/geojson-qgis.png" />
        </div>

        <div class="slide lonely">
            <img src="img/geojson-qgis-network.png" />
        </div>

        <div class="slide lonely">
            <img src="img/geojson-tilemill.png" />
        </div>

        <div class="slide lonely">
            <img src="img/geojson-tilemill-network.png" />
        </div>

        <div class="slide lonely">
            <img src="img/geojson-worstyears.png" />
            <a class="source" href="https://github.com/AnnieGitUrGun/MappingTest/blob/11bec007758702269b504ece55e09e54fa8f60fa/AnnesPOI.geojson">
                AnnieGitUrGun on github
            </a>
        </div>

        <div class="slide lonely">
            <img src="img/geojson-worstyears-attribution.png" />
        </div>

        <div class="slide lonely">
            <h2>GeoJSON is readable</h2>
        </div>

        <div class="slide lonely">
            <img src="img/geojson-worstyears-raw.png" />
        </div>

        <div class="slide lonely">
            <pre>
{
    ...
}</pre>
        </div>

        <div class="slide lonely">
            <pre>
{
    "type": "FeatureCollection",
    "features": [ ... ]
}</pre>
        </div>

        <div class="slide lonely">
            <pre>
{
    "type": "FeatureCollection",
    "features": [
        { ... },
        { ... },
        { ... }
    ]
}</pre>
        </div>

        <div class="slide">
            <pre>
{
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "id": 1,
                "Name": "My House",
                "City": "White Hall",
                "Comments": "It's OK"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [-76.596, 39.684]
            }
        }
    ]
}</pre>
        </div>

        <div class="slide lonely">
            <h2>GeoJSON allows multiple geometry types in one file</h2>
        </div>

        <div class="slide lonely">
            <h2>GeoJSON is easy for web apps to understand</h2>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-sql.png" />
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-geojson.png" />
        </div>

        <div class="slide lonely">
            <h2>it's not without its flaws</h2>
        </div>

        <div class="slide lonely">
            <h2>the files can get big:</h2>
        </div>

        <div class="slide lonely">
            <h2>the files can get big:</h2>
            <img src="img/geojson-worstyears-raw-columns.png" />
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h2>getting GeoJSON files from CartoDB</h2>
        </div>

        <div class="slide lonely">
            <pre>http://eric.cartodb.com/api/v2/
    sql?q=SELECT * 
          FROM earthquakes 
          WHERE mag &gt; 7</pre>
        </div>

        <div class="slide lonely">
            <pre>http://eric.cartodb.com/api/v2/
    sql?q=SELECT * 
          FROM earthquakes 
          WHERE mag &gt; 7
    <strong>&amp;format=geojson</strong></pre>
            <a href="http://eric.cartodb.com/api/v2/sql?q=select%20*%20from%20earthquakes%20WHERE%20mag%20%3E%207&format=geojson">view results</a>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-sql-cartodb.png" />
        </div>

        <div class="slide lonely">
            <img class="small" src="img/web-geojson-cartodb.png" />
        </div>

        <div class="slide intermission"></div>

        <div class="slide lonely">
            <h2>let's put GeoJSON files online</h2>
        </div>

        <div class="slide lonely">
            <p><a href="http://geojson.io/">geojson.io</a></p>
            <img src="img/geojson.io.png" />
        </div>

        <div class="slide lonely">
            <h2>try it: go to <a href="http://geojson.io">geojson.io</a>, make some features, and save your map</h2>
        </div>

        <div class="slide lonely">
            <img src="img/geojson-github-rendered.png" />
        </div>

        <div class="slide lonely">
            <img class="small" src="img/github-philly-farmers-markets.png" />
            <a class="source" href="https://github.com/CityOfPhiladelphia/phl-open-geodata/blob/master/farmers_markets/farmers_markets.geojson">Philly farmers markets</a>
        </div>

        <div class="slide lonely">
            <img src="img/github-nps.png" />
            <a class="source" href="http://www.nps.gov/npmap/support/library/examples/layers-geojson-github.html?api=leaflet">National Park Service: NPMap</a>
        </div>

        <div class="slide lonely">
            <img class="small" src="img/github-atlantic.png" />
            <a class="source" href="http://www.theatlantic.com/technology/archive/2014/02/catch-my-diff-githubs-new-feature-means-big-things-for-open-data/283673/">The Atlantic</a>
        </div>

        <div class="slide lonely">
            <h2>create a github account</h2>
            <img class="small" src="img/github-signup.png" />
        </div>

        <div class="slide lonely">
            <h2>fork this repository:</h2>
            <p><a href="https://github.com/ebrelsford/geojson-examples">github.com/ebrelsford/geojson-examples</a></p>
            <img class="small" src="img/github-fork.png" />
        </div>

        <div class="slide lonely">
            <h2>login with geojson.io</h2>
            <img class="small" src="img/geojson-io-login.gif" />
        </div>

        <div class="slide lonely">
            <h2>find the repository you forked</h2>
            <img class="small" src="img/geojson-io-find-repo.gif" />
        </div>

        <div class="slide lonely">
            <h2>make some changes and save them</h2>
            <img class="small" src="img/geojson-io-save.png" />
        </div>

        <div class="slide lonely">
            <h2>view the commit</h2>
            <img class="small" src="img/geojson-io-commit.png" />
        </div>

        <div class="slide lonely">
            <p>or through github</p>
            <img class="small" src="img/github-find-diff.gif" />
        </div>

    </body>
</html>
