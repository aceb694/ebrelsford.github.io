<!DOCTYPE html>
<html>
    <head>
        <title>Class 4 | Advanced Interactive Web Mapping, Programming, and Design</title>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

        <link href='http://fonts.googleapis.com/css?family=Alegreya Sans' rel='stylesheet' type='text/css'>

        <link href="css/pig.css" rel="stylesheet" type="text/css" />
        <link href="css/base.css" rel="stylesheet" />

        <script src="js/pig.js"></script>
    </head>
    <body>

        <div class="slide">
            <p>Welcome to Advanced Interactive Web Mapping, Programming, and Design, Class 4</p>
            <p>This is a web page that can be viewed as slides.</p>
            <p>→ to move forward</p>
            <p>← to go back</p>
        </div>

        <div class="slide">
            <h2>Advanced Interactive Web Mapping, Programming, and Design</h2>
            <p>Class 4</p>
        </div>

        <div class="slide">
            <h2>cartodb.js</h2>
        </div>

        <div class="slide">
            <h2>It's an API that adds functionality to your page (rather than data)</h2>
        </div>

        <div class="slide">
            <h2>I'll call this a <em>library</em> from now on</h2>
        </div>

        <div class="slide">
            <h2>Since it adds functionality, you need to load some code</h2>
        </div>

        <div class="slide">
            <h2>Just like Leaflet and jQuery</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-html.png);">
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-html.png);">
            <h2>(you'll copy and paste this)</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-js.png);">
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-js.png);">
            <h2>Then invoke it in your JavaScript</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-js-arrow.png);">
            <h2>Wait where'd this come from?!</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-api-string.png);">
        </div>

        <div class="slide" style="background-image: url(img/cartodb-api-string.png);">
            <h2><a href="http://jsbin.com/dulezu/2/edit?js,output" target="_blank">here's an example</a></h2>
        </div>

        <div class="slide">
            <h2>in-class exercise, part 1:</h2>
            <a href="inclass.html">bit.ly/savi800-class4</a>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-jsbin.png);">
            <h2>OK but that seems like a lot of effort to embed a map from CartoDB</h2>
        </div>

        <div class="slide" style="background-image: url(img/christian-bale-kermit-the-frog.gif); background-size: 50%;">
            <h2>true</h2>
        </div>

        <div class="slide">
            <h2>But there's more!</h2>
        </div>

        <div class="slide">
            <h2>Now you can customize everything</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-createvis.png);">
            <a class="source" href="http://docs.cartodb.com/cartodb-platform/cartodb-js.html#cartodbcreatevismapid-vizjsonurl-options--callback" target="_blank">createVis</a>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-createvis.png);">
            <h2>createVis() takes an object of options</h2>
            <a class="source" href="http://docs.cartodb.com/cartodb-platform/cartodb-js.html#cartodbcreatevismapid-vizjsonurl-options--callback" target="_blank">createVis</a>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-createvis-options.png);">
            <a class="source" href="http://docs.cartodb.com/cartodb-platform/cartodb-js.html#cartodbcreatevismapid-vizjsonurl-options--callback" target="_blank">createVis</a>
        </div>

        <div class="slide">
            <h2>in-class exercise, part 2:</h2>
            <a href="inclass.html">bit.ly/savi800-class4</a>
        </div>

        <div class="slide">
            <h2>As with <code>$.getJSON()</code>, you can add a <code>done</code> callback</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-done.png);">
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-done.png);">
            <h2><pre><code>cartodb.createVis(...)
    .done(function (vis, layers) {
        console.log('vis loaded!');
    });</code></pre></h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-done.png);">
            <h2><code>layers</code> is an array of layers, the first one is the base map</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-layer.png);">
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-layer-hide.png);">
            <a href="http://jsbin.com/temahu/1/edit?js,output" class="source">jsbin</a>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-layer-hide.png);">
            <h2 style="background: rgba(256, 256, 256, 0.95);"><pre><code>cartodb.createVis(...)
    .done(function (vis, layers) {
        layers[1].hide();
    });</code></pre></h2>
            <a href="http://jsbin.com/temahu/1/edit?js,output" class="source">jsbin</a>
        </div>

        <div class="slide">
            <h2>the second element of <code>layers</code> is all the visualization layers</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-layers.png);">
        </div>

        <div class="slide">
            <h2>in-class exercise, part 3:</h2>
            <a href="inclass.html">bit.ly/savi800-class4</a>
        </div>

        <div class="slide">
            <h2>if you want to get one of those layers, use <code>getSubLayer()</code></h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-getsublayer.png);">
        </div>

        <div class="slide">
            <h2>sublayers are cool!</h2>
        </div>

        <div class="slide">
            <h2>they give you access to everything you have in the CartoDB UI</h2>
        </div>

        <div class="slide">
            <h2>they give you access to everything you have in the CartoDB UI</h2>
            <h2>SQL, CartoCSS</h2>
        </div>

        <div class="slide">
            <h2>and you can change those dynamically</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-sublayer.gif);">
            <a href="http://jsbin.com/jaqoco/1/edit?js,output" target="_blank" class="source">jsbin</a>
        </div>

        <div class="slide">
            <h2>scope! <code>layers</code> won't be available outside of <code>.done()</code></h2>
        </div>

        <div class="slide">
            <h2>if you want to do this when reacting to a user's input, you need to save the sublayer to a variable</h2>
        </div>

        <div class="slide" style="background-image: url(img/cartodb-js-save-sublayer.png);">
            <a href="http://jsbin.com/nesoxa/2/edit?js,output" target="_blank" class="source">jsbin</a>
        </div>

        <div class="slide">
            <h2>in-class exercise, part 4:</h2>
            <a href="inclass.html">bit.ly/savi800-class4</a>
        </div>

    </body>
</html>
